---
title: "魔盒挑战 - 第二期"
---

## 暂定流程

1. 参赛者在[俱乐部官网](https://sumsc.xin)使用苏州大学统一身份认证进行登录

2. 参赛者同意比赛要求后登记报名

3. 参赛者通过官方提供的 Github 仓库获取赛题（Fork 或直接下载均可）

4. 参赛者完成题目后在提交页面输入自己的repo地址完成提交

5. 每天凌晨在azure pipeline上进行自动评分

## 暂定大纲

### Python

- Flask 简单运用
- 图片 base64 编解码
- 环境变量读取
- HTTP 请求
- JSON 编解码
- help 和 __doc__
- eForm-Auth 简化：

### Linux

- SSH Key Generate
- SCP

### Git

- Fork
- Clone
- Push

## 函数定义

```python
@app.route('/')
def index():
    """
    只有 Hello World 的首页
    :return:
    """
    return "Hello, world!"

# TODO: 捕获 404 错误，返回 404.html
@app.errorhandler(404)
def page_not_found():
    """
    以此项目中的404.html作为此Web Server工作时的404错误页
    """
    pass

# TODO: 完成接受 HTTP_URL 的 picture_reshape
# TODO: 完成接受相对路径的 picture_reshape
@app.route('/pic', methods=['POST'])
def picture_reshape():
    """
    **请使用 PIL 进行本函数的编写**
    获取请求的 query_string 中携带的 b64_url 值
    从 b64_url 下载一张图片的 base64 编码，reshape 转为 100*100，并开启抗锯齿（ANTIALIAS）
    对 reshape 后的图片分别使用 base64 与 md5 进行编码，以 JSON 格式返回，参数与返回格式如下

    :param: b64_url: 
        本题的 b64_url 以 arguments 的形式给出，可能会出现两种输入
        1. 一个 HTTP URL
        2. 一个指向 TXT 文本文件的相对路径，该 TXT 文本文件包含一个 HTTP URL

    :return: JSON
    {
        "md5": <图片reshape后的md5编码: str>,
        "base64_picture": <图片reshape后的base64编码: str>
    }
    """
    import PIL
    pass

# TODO: 爬取 996.icu Repo，获取企业名单
@app.route('/996')
def company_996():
    """
    从 github.com/996icu/996.ICU 项目中获取所有的已确认是996的公司名单，并

    :return: 以 JSON List 的格式返回，格式如下
    [{
        "city": <city_name 城市名称>,
        "company": <company_name 公司名称>,
        "exposure_time": <exposure_time 曝光时间>,
        "description": <description 描述>,
        "evidence": <evidence 证据>
    }, ...]
    """
    pass
```
